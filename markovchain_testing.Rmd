---
title: "Forest_Sequencing"
author: "Katie Murenbeeld"
date: "4/19/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Intro:

Testing out markov chain for picking a "typical" sequence of logging events in Southern Idaho timber harvest activities. 

```{r load_lib, echo=FALSE, eval=TRUE}
library(markovchain)
#library(dplyr)
library(tidyverse)
```

## Load data

```{r data, echo=FALSE, eval=TRUE}
df <- read.csv('proj_newcode2_20210419.csv')
#df <- df %>% rename(df, SEQ_INT = int)

df$ACRES <- as.numeric(df$ACRES)
head(df)
```

## Try out the createSequenceMatrix fuction

```{r seqmat_test, echo=TRUE, eval=TRUE}
test_seq <- createSequenceMatrix(df$GEN_ACTIVITY, toRowProbs = TRUE, sanitize=TRUE)
test_seq
```

```{r test_MCfit, echo=TRUE, eval=TRUE}
mcFitMLE <- markovchainFit(data = df$GEN_ACTIVITY)
mcFitMLE
```

```{r test_CTMC, echo=TRUE, eval=TRUE}
df_ctmc <- df %>% select(GEN_ACTIVITY, SEQ_INT)

ctmcFit(df_ctmc, byrow=TRUE, name="test_ctmc", confidencelevel = 0.95)
```

## This is fine, but I want to basically do this for each project? For each time an ACT_int is true? I guess I don't quite understand what the functions are doing.  I found a helpful tutorial to look into more: https://www.datacamp.com/community/tutorials/markov-chain-analysis-r as well as the cran documentation: https://cran.r-project.org/web/packages/markovchain/markovchain.pdf
